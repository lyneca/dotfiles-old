#!/bin/bash
clip=false
window=false
select=false

while getopts "wcs" opt; do
    case "$opt" in
        w) window=true;;
        c) clip=true;;
        s) select=true;;
    esac
done


if [ $window = true ]; then
    ARGS+="-i $(xdotool getactivewindow) "
elif [ $select = true ]; then
    ARGS+="-s "
fi

if [ $clip = true ]; then
    maim $ARGS -lc 0.819,0.686,0.447,0.1 | xclip -selection clipboard -t image/png
else
    filename="$HOME/screenshots/$(date +%DT%T | tr '/' '-').png"
    touch $filename
    maim $ARGS -lc 0.819,0.686,0.447,0.1 > "$filename"
    if [ "$(du $filename | cut -f 1)" -eq 0 ]; then
        rm $filename
    fi
fi

